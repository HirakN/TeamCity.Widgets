<!--
  ~ Copyright 2000-2015 JetBrains s.r.o.
  ~
  ~ Licensed under the Apache License, Version 2.0 (the "License");
  ~ you may not use this file except in compliance with the License.
  ~ You may obtain a copy of the License at
  ~
  ~ http://www.apache.org/licenses/LICENSE-2.0
  ~
  ~ Unless required by applicable law or agreed to in writing, software
  ~ distributed under the License is distributed on an "AS IS" BASIS,
  ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  ~ See the License for the specific language governing permissions and
  ~ limitations under the License.
  -->

<link rel="import" href="expanded-behavior.html">
<link rel="import" href="../bower_components/iron-icons/iron-icons.html">

<dom-module id="tree-icon">
    <style>
        :host{
            width: 16px;
            height: 16px;
            line-height: 1.5em;
            display: inline-block;
            cursor: pointer;
        }
        :host .icon{
            width: 100%;
            height: 100%;
            display: inline-block;
            background: transparent url('icons/arrow-closed.png') no-repeat 0 0 ;
        }
        :host(.expanded) .icon{
            background: transparent url('icons/arrow-opened.png') no-repeat 0 0 ;
        }
    </style>
    <template>
        <template is="dom-if" if="{{hasChildren}}">
            <span class="icon">&nbsp;</span>
        </template>
    </template>
    <script>
        // element registration
        Polymer({
            is: "tree-icon",
            properties: {
                data:{
                    type: Object,
                    notify: true
                },
                hasChildren:{
                    type: Boolean,
                    computed: 'computeHasChildren(data)'
                }
            },
            behaviors: [ExpandedBehavior],
            listeners: {
                click: '_toggleExpanded'
            },
            computeHasChildren: function(data){
                return data.children && data.children.length > 0;
            }

        });
    </script>
</dom-module>