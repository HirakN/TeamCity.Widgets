<!--
  ~ Copyright 2000-2015 JetBrains s.r.o.
  ~
  ~ Licensed under the Apache License, Version 2.0 (the "License");
  ~ you may not use this file except in compliance with the License.
  ~ You may obtain a copy of the License at
  ~
  ~ http://www.apache.org/licenses/LICENSE-2.0
  ~
  ~ Unless required by applicable law or agreed to in writing, software
  ~ distributed under the License is distributed on an "AS IS" BASIS,
  ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  ~ See the License for the specific language governing permissions and
  ~ limitations under the License.
  -->

<!DOCTYPE html>
<html>
<head> <!-- 1. Load platform support before any code that touches the DOM. -->

</head>
<body>
<!-- This is an example of the page content that can be used with StaticUIExtension on buildserver-->

<script>
    function __widgetUrl() {
        return "http://buildserver.labs.intellij.net/app/static_content/widgets/buildStatus/chains.html?buildType=ijplatform_master_PhpStormTrunkNew_Master&project=ijplatform_master_PhpStormTrunkNew";
    }
    function __showIframe(elm) {
        var bsc = elm.parentNode;
        var bs = bsc.getElementsByTagName("iframe");
        if (bs.length > 0) {
            return;
        }
        bsc.innerHTML += '<div class="__widgetLink __widgetClose" onclick="__removeIframe(this);">Close</div>';
        bsc.innerHTML += '<iframe class="__widgetIframe" src="' + __widgetUrl() + '">';

    }
    function __openNewWidgetPage() {
        var win = window.open(__widgetUrl(), '_blank');
        win.focus();
    }
    function __removeIframe(elm) {
        var bsc = elm.parentNode;
        var bs = bsc.getElementsByTagName("iframe");
        if (bs.length == 0) {
            return;
        }
        bsc.removeChild(bs[0]);
        bsc.removeChild(elm);
    }
</script>
<style>
    .__widgetContainer {
        color: #a7a7a7;
    }

    .__widgetLink {
        cursor: pointer;
        text-decoration: underline;
    }

    .__widgetClose {
        float: right;
    }
    .__widgetIframe{
        width: 100%;
        height: 350px;
        border: none;
    }
</style>
<div class="__widgetContainer">
    <span class="__widgetLink" onclick="__showIframe(this);">View</span> build status widget in place or <span
        class="__widgetLink" onclick="__openNewWidgetPage(this);">open</span> it in new page
</div>
</body>
</html>

